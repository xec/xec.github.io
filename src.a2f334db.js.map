{"version":3,"sources":["../src/snowflakes.js","../src/index.js"],"names":["snowflakes","flakeSvgTemplates","document","getElementById","snowflakeCount","rootNode","body","flakes","Array","fill","map","createFlake","enableAnimation","windFactor","Math","ceil","random","windCap","template","floor","length","clone","importNode","content","flake","querySelector","size","positionX","positionY","appendChild","data","x","y","velocity","rotation","rotationVelocity","classList","add","style","height","step","forEach","transform","window","requestAnimationFrame","start","toggle"],"mappings":";AA4EeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA5Ef,IAAMA,EAAa,GACbC,EAAoB,CACxBC,SAASC,eAAe,aACxBD,SAASC,eAAe,cAEpBC,EAAiB,IACjBC,EAAWH,SAASI,KACpBC,EAAS,IAAIC,MAAMJ,GAAgBK,KAAK,MAAMC,IAAIC,GACpDC,GAAkB,EAClBC,EAAaC,KAAKC,KAAqB,EAAhBD,KAAKE,UAAgB,EAC1CC,EAAU,EAEhB,SAASN,IACDO,IAAAA,EAAWjB,EAAkBa,KAAKK,MAAML,KAAKE,SAAWf,EAAkBmB,SAC1EC,EAAQnB,SAASoB,WAAWJ,EAASK,SAAS,GAC9CC,EAAQH,EAAMI,cAAc,OAC5BC,EAAOZ,KAAKE,SACZW,EAA4B,IAAhBb,KAAKE,SAAiB,EAClCY,EAA4B,IAAhBd,KAAKE,SAAiB,GAgBjCQ,OAdPnB,EAASwB,YAAYR,GAErBG,EAAMM,KAAO,CACXC,EAAGJ,EACHK,EAAGJ,EACHF,KAAMA,EACNO,UAAWP,EAAO,IAAO,EACzBQ,SAAU,EACVC,iBAAmC,EAAhBrB,KAAKE,SAAgB,GAG1CQ,EAAMY,UAAUC,IAAI,aACpBb,EAAMc,MAAMC,OAAiB,GAAPb,EAAY,GAAM,KAEjCF,EAYT,SAASgB,IACF5B,IAEDC,EAAaI,EACfJ,GAAc,GACLA,GAAcI,EACvBJ,GAAc,GACLC,KAAKE,SAAW,KAEzBH,GAAeC,KAAKE,SAAW,GAAM,KAEvCT,EAAOkC,QAAQ,SAAAjB,GACbA,EAAMM,KAAKC,GAAKlB,EAAaW,EAAMM,KAAKG,SACpCT,EAAMM,KAAKC,EAAI,MAAKP,EAAMM,KAAKC,GAAK,GACpCP,EAAMM,KAAKC,GAAK,IAAGP,EAAMM,KAAKC,EAAI,KAGtCP,EAAMM,KAAKE,GAAKR,EAAMM,KAAKG,SACvBT,EAAMM,KAAKE,EAAI,MAAKR,EAAMM,KAAKE,EAAI,GAGvCR,EAAMM,KAAKI,UAAYV,EAAMM,KAAKK,kBAC9BX,EAAMM,KAAKI,SAAW,KAAOV,EAAMM,KAAKI,UAAY,OAAKV,EAAMM,KAAKI,SAAW,GAGnFV,EAAMc,MAAMI,UAAyBlB,aAAAA,OAAAA,EAAMM,KAAKC,EAAQP,QAAAA,OAAAA,EAAMM,KAAKE,EAAeR,eAAAA,OAAAA,EAAMM,KAAKI,SAA7F,UAEFS,OAAOC,sBAAsBJ,IApC/BxC,EAAW6C,MAAQ,WACjBF,OAAOC,sBAAsBJ,IAI/BxC,EAAW8C,OAAS,YACjBlC,GAAmBA,IAAoBZ,EAAW6C,SAiCtC7C,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACzEf,aAHA,IAAA,EAAA,EAAA,QAAA,iBAGA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GADAA,EAAW6C,QAAAA","file":"src.a2f334db.js","sourceRoot":"..\\public","sourcesContent":["const snowflakes = {} // default export object\r\nconst flakeSvgTemplates = [\r\n  document.getElementById('flakeSvg1'),\r\n  document.getElementById('flakeSvg2')\r\n]\r\nconst snowflakeCount = 100\r\nconst rootNode = document.body\r\nconst flakes = new Array(snowflakeCount).fill(null).map(createFlake)\r\nlet enableAnimation = true\r\nlet windFactor = Math.ceil(Math.random() * 2) - 1\r\nconst windCap = 2\r\n\r\nfunction createFlake () {\r\n  const template = flakeSvgTemplates[Math.floor(Math.random() * flakeSvgTemplates.length)]\r\n  const clone = document.importNode(template.content, true)\r\n  const flake = clone.querySelector('svg')\r\n  const size = Math.random() // 0-1\r\n  const positionX = Math.random() * 110 - 5\r\n  const positionY = Math.random() * 100 - 10\r\n\r\n  rootNode.appendChild(clone)\r\n\r\n  flake.data = {\r\n    x: positionX,\r\n    y: positionY,\r\n    size: size,\r\n    velocity: (size + 0.4) / 3, // let smaller flakes move slower\r\n    rotation: 0,\r\n    rotationVelocity: (Math.random() * 2) - 1\r\n  }\r\n\r\n  flake.classList.add('snowflake')\r\n  flake.style.height = (size * 30 + 10) + 'px'\r\n\r\n  return flake\r\n}\r\n\r\nsnowflakes.start = () => {\r\n  window.requestAnimationFrame(step)\r\n}\r\n\r\n// todo: fix toggle (dunno why this not working)\r\nsnowflakes.toggle = () => {\r\n  (enableAnimation = !enableAnimation) && snowflakes.start()\r\n}\r\n\r\nfunction step () {\r\n  if (!enableAnimation) return\r\n  // let 5 be strongest wind\r\n  if (windFactor > windCap) {\r\n    windFactor -= 0.1\r\n  } else if (windFactor < -windCap) {\r\n    windFactor += 0.1\r\n  } else if (Math.random() > 0.9) {\r\n    // common wind for all flakes. only change every 10th step randomly.\r\n    windFactor += (Math.random() / 10) - 0.05\r\n  }\r\n  flakes.forEach(flake => {\r\n    flake.data.x += windFactor * flake.data.velocity\r\n    if (flake.data.x > 107) flake.data.x = -6 // when clipped right side, move to left side\r\n    if (flake.data.x < -7) flake.data.x = 106 // and vice versa\r\n\r\n    // fall down (bigger = quicker)\r\n    flake.data.y += flake.data.velocity\r\n    if (flake.data.y > 107) flake.data.y = 0\r\n\r\n    // rotate\r\n    flake.data.rotation += flake.data.rotationVelocity\r\n    if (flake.data.rotation > 360 || flake.data.rotation < -360) flake.data.rotation = 0\r\n\r\n    // apply styles\r\n    flake.style.transform = `translate(${flake.data.x}vw, ${flake.data.y}vh) rotate(${flake.data.rotation}deg)`\r\n  })\r\n  window.requestAnimationFrame(step)\r\n}\r\n\r\nexport default snowflakes\r\n","import snowflakes from './snowflakes'\r\n\r\nsnowflakes.start()\r\n// document.getElementById('toggleFlakes').addEventListener('click', () => snowflakes.toggle())\r\n"]}